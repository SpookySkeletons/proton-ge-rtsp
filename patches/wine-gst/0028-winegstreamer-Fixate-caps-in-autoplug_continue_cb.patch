From 8352bf2c8624c3015d54169868b6df6ef6a87484 Mon Sep 17 00:00:00 2001
From: Torge Matthies <openglfreak@googlemail.com>
Date: Tue, 19 Mar 2024 10:19:09 +0100
Subject: [PATCH 28/29] winegstreamer: Fixate caps in autoplug_continue_cb.

Not strictly necessary but avoids an assert in gstreamer code.
---
 dlls/winegstreamer/wg_parser.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/dlls/winegstreamer/wg_parser.c b/dlls/winegstreamer/wg_parser.c
index 4c4ee4bcc2a..3bee51ed518 100644
--- a/dlls/winegstreamer/wg_parser.c
+++ b/dlls/winegstreamer/wg_parser.c
@@ -577,7 +577,9 @@ static gboolean autoplug_continue_cb(GstElement * decodebin, GstPad *pad, GstCap
 {
     struct wg_format format;
 
+    caps = gst_caps_fixate(gst_caps_copy_nth(caps, 0));
     wg_format_from_caps(&format, caps);
+    gst_caps_unref(caps);
 
     return !format_is_compressed(&format);
 }
-- 
2.44.0

